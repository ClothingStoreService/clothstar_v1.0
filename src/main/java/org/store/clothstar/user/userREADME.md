# user 패키지 README

## 패키지 개요
이 패키지는 회원에 대한 기능을 구현하기 위한 패키지입니다. 회원 도메인에 대한 시큐리티 적용을 달성하기 위한 규칙과 기획을 포함합니다.

### 회원가입 설계안
1.  아이디, 이메일, 비밀번호, 이름, 생년월일, 전화번호를 입력  
1-1. 아이디 중복체크  
1-2. 아이디 정규식 규칙 확인(규칙 : 영문자, 숫자 포함 최소 6자 이상 20자 이하)  
1-3. 이메일 중복체크  
1-4. 비밀번호 정규식으로 규칙 확인(규칙 : 영문자(대,소문자), 숫자, 특수문자를 포함하여 최소 8자 이상 20자 이하)  
2. 이메일 확인  
2-1. 유저 이메일로 링크 전송  
2-2. 링크를 눌렀을때 기입한 이메일 인증 완료
3. 회원가입 완료
4. 가입 후 회원등급, 포인트 부여
   - 신규회원의 등급은 [ 브론즈 ]로 자동 할당됨
   - 회원등급은 구매금액에 따라 조정될 수 있음
5. DB에 저장되는 비밀번호는 암호화
   - 암호화는 현재 표준에 부합해야함(bcrypt, Argon2)
6. 생성일자는 현재일자 시간으로 자동 DB에 저장 

### 로그인 설계안
1. 아이디, 비밀번호 체크후 로그인
    - 아이디가 존재하지 않을 경우, ‘존재하지 않는 아이디입니다’ 알림
    - 비밀번호가 맞지 않을 경우, ‘잘못된 비밀번호입니다’ 알림

### 아이디 찾기 설계안
1. 가입한 이메일 입력  
1-1. 이메일 DB에 있는지 확인
    - 이메일이 DB에 없을 경우, ‘아이디가 존재하지 않습니다.’ 알림
2. 가입한 아이디를 이메일로 전송

### 비밀번호 찾기 설계안
1. 가입한 이메일과, 아이디 입력  
1-1. 이메일과 아이디가 가입한 유저가 맞는지 유효성 체크
2. 이메일로 비밀번호 변경 링크 전송  
2-1. JWT 토큰으로 링크를 타고 왔는지 검증
3. 새로운 비밀번호, 새 비밀번호 확인 입력
    - 입력한 2개 비밀번호 동일한지 확인
4. 비밀번호 변경 완료

### 회원정보 수정페이지 이동 설계
1. 비밀번호 입력 (회원 정보 수정 시 비밀번호를 재확인해야 한다.)
   - 비밀번호 유효성 체크
2. 회원정보 수정 페이지 이동

### 비밀번호 수정 설계안
1. [ 현재 비밀번호, 새 비밀번호, 새 비밀번호 확인 ] 입력  
1-1. 현재 비밀번호 맞는지 확인  
1-3. [ 새 비밀번호 / 새 비밀번호 확인 ]이 동일한지 확인  
1-4. 새 비밀번호가 기존 비밀번호가 다른지 확인  
1.5. 비밀번호 정규식으로 규칙 확인(규칙 : 영문자(대,소문자), 숫자, 특수문자를 포함하여 최소 8자 이상 20자 이하)
1-6. 만약 기존의 비밀번호와 같다면 ‘기존의 비밀번호와 동일합니다’ 알림

### 이메일 수정 설계안
1. 수정할 이메일 입력  
   1-1 입력한 이메일이 기존과 다른 이메일인지 확인
2. 인증메일 전송 버튼 누르면 수정한 이메일로 인증메일 전송, 인증메일 재전송 버튼과 이메일 변경 버튼 생성
3. 인증메일로 전송된 링크 누르면 이메일 인증 완료
4. 이메일 변경 버튼 클릭시 이메일 수정 완료

### API 디자인
- 회원 가입 : POST /members/signup
  - 프로세스
    1. 아이디, 이메일, 비밀번호, 이름, 생년월일, 전화번호를 받는다.
    2. 아이디, 이에밀 중복체크, 아이디 정규식 규칙 확인, 비밀번호 정규식 규칙 확인을 진행 한다.
       - 아이디 정규식 규칙 : 영문자, 숫자 포함 최소 6자 이상 20자 이하
       - 비밀번호 정규식 규칙 : 영문자(대,소문자), 숫자, 특수문자를 포함하여 최소 8자 이상 20자 이하 
    3. 기입한 이메일로 인증용 링크 전송
       - 인증메일 전송 API : POST /members/valid/email-send
- 인증메일 전송 : POST /members/valid/email-send
    - 설명 : 회원가입시 가입한 이메일 검증 활용과 이메일 수정시 전송될 인증 메일
    - 프로세스
      1. 이메일로 링크 전송 
      2. 링크 누르면 이메일 인증 완료
- 회원 가입 이메일 링크 확인 : POST /members/signup/email-check
  - 설명 : 이메일로 전송된 링크를 눌렀는지 확인후 회원가입 완료
  - 프로세스
    1. 회원등급 브론즈 등급 부여
    2. 포인트 0 초기화
    3. 비밀번호 암호화 해서 DB 인입
    4. 생성시간 현재일 시간으로 자동 DB 인입
- 회원 로그인 : POST /members/login
  - 프로세스
    1. 입력한 아이디와 비밀번호 검증
       - 아이디가 유효하지 않을땐 ‘존재하지 않는 아이디입니다’ error 메시지 응답
       - 비밀번호가 맞지 않을 경우, ‘잘못된 비밀번호입니다’ error 메시지 응답
- 회원 아이디 이메일 전송 : POST /members/find/id/email-send
  - 설명 : 아이디 찾기 할때 입력한 이메일로 아이디를 전송해줌
- 회원 비밀번호 찾기 : POST /members/find/password/email-send
  - 프로세스
    1. 입력한 이메일, 아이디 검증
    2. 이메일로 비밀번호 변경 URL 전송
- 회원 비밀번호 유효성 확인 : POST /members/valid/password
  - 설명 : 회원정보 수정창으로 가기 위한 회원정보 인증
  - 프로세스
    1. 입력한 비밀번호가 맞는지 확인
        - 비밀번호가 맞지 않을 경우, ‘잘못된 비밀번호입니다’ error 메시지 응답
- 회원 이메일 수정 : PATCH /members/email
  - 프로세스
    1. 인증메일 API로 전송된 링크 클릭 했는지 확인
    2. 링크 클릭했으면 이메일 수정
- 회원 비밀번호 수정 : PATCH /members/password
  - 프로세스
    1. 입력한 비밀번호 정규식 규칙 확인
    2. 정규식 규칙에 맞으면 비밀번호 수정